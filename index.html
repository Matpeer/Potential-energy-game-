```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Planet Energy Conservation Game</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" sizes="32x32" href="icon-500x500.png">
    <link rel="apple-touch-icon" href="icon-500x500.png">
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            font-family: Arial, sans-serif;
        }
        canvas {
            border: 1px solid black;
            max-width: 100%;
            max-height: 70vh;
        }
        #gameControls {
            margin-top: 10px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
        }
        select, button {
            font-size: 16px;
            padding: 5px;
        }
        @media (max-width: 600px) {
            canvas {
                max-height: 60vh;
            }
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    <div id="gameControls">
        <label for="heightSlider">Height: </label>
        <input type="range" id="heightSlider" min="0" max="1000" value="500" step="1">
        <button id="dropButton">Drop Ball</button>
        <select id="planetSelect">
            <option value="earth">Earth</option>
            <option value="moon">Moon</option>
            <option value="jupiter">Jupiter</option>
        </select>
    </div>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const heightSlider = document.getElementById('heightSlider');
        const dropButton = document.getElementById('dropButton');
        const planetSelect = document.getElementById('planetSelect');

        // Set canvas size
        function resizeCanvas() {
            canvas.width = Math.min(800, window.innerWidth - 20);
            canvas.height = Math.min(600, window.innerHeight * 0.7);
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // Game variables
        let score = 0;
        let currentStage = 0;
        let gameState = 'setup'; // 'setup', 'dropping', 'scored', 'missed'
        let impactSpeed = 0;

        const gravities = {
            earth: 9.8,
            moon: 1.62,
            jupiter: 24.79
        };

        function getRandomSpeed() {
            return (Math.random() * 42 + 2).toFixed(1);  // Random speed between 2.0 and 44.0 m/s
        }

        const stages = [
            { planet: 'earth', targetSpeed: getRandomSpeed(), message: 'Welcome to Earth!' },
            { planet: 'moon', targetSpeed: getRandomSpeed(), message: 'Now try the Moon!' },
            { planet: 'jupiter', targetSpeed: getRandomSpeed(), message: 'Jupiter challenge!' },
            { planet: 'earth', targetSpeed: getRandomSpeed(), message: 'Back to Earth!' }
        ];

        // Game objects
        const ball = {
            x: canvas.width / 2,
            y: canvas.height / 2,
            radius: 20,
            color: 'red',
            velocity: 0
        };

        const target = {
            x: canvas.width / 2 - 50,
            width: 100,
            height: 20,
            color: 'green'
        };

        // Event listeners
        heightSlider.addEventListener('input', () => {
            if (gameState === 'setup') {
                const height = parseInt(heightSlider.value) / 10;  // Convert to meters
                ball.y = canvas.height - target.height - height * ((canvas.height - target.height) / 100) - ball.radius;
            }
        });

        dropButton.addEventListener('click', () => {
            if (gameState === 'setup') {
                gameState = 'dropping';
                ball.velocity = 0;
                impactSpeed = 0;
            }
        });

        planetSelect.addEventListener('change', () => {
            if (gameState === 'setup') {
                setStage(currentStage);
            }
        });

        // Game functions
        function setStage(stageIndex) {
            currentStage = stageIndex % stages.length;
            const stage = stages[currentStage];
            planetSelect.value = stage.planet;
            const height = parseInt(heightSlider.value) / 10;  // Convert to meters
            ball.y = canvas.height - target.height - height * ((canvas.height - target.height) / 100) - ball.radius;
            ball.velocity = 0;
            gameState = 'setup';
            impactSpeed = 0;
            stage.targetSpeed = getRandomSpeed();  // Set a new random target speed for each stage
        }

        function drawBall() {
            ctx.beginPath();
            ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
            ctx.fillStyle = ball.color;
            ctx.fill();
            ctx.closePath();
        }

        function drawTarget() {
            target.y = canvas.height - target.height;
            ctx.fillStyle = target.color;
            ctx.fillRect(target.x, target.y, target.width, target.height);
        }

        function updateBall() {
            if (gameState === 'dropping') {
                const gravity = gravities[planetSelect.value];
                const timeStep = 1 / 60;  // For 60 FPS
                
                // Update velocity: v = v0 + at
                ball.velocity += gravity * timeStep;
                
                // Update position: x = x0 + v*t + 0.5*a*t^2
                ball.y += ball.velocity * timeStep + 0.5 * gravity * timeStep * timeStep;

                if (ball.y + ball.radius > canvas.height - target.height) {
                    ball.y = canvas.height - target.height - ball.radius;
                    impactSpeed = Math.abs(ball.velocity);
                    const targetSpeed = parseFloat(stages[currentStage].targetSpeed);
                    if (ball.x > target.x && ball.x < target.x + target.width) {
                        if (Math.abs(impactSpeed - targetSpeed) < 0.5) {
                            gameState = 'scored';
                            score++;
                            currentStage++;
                        } else {
                            gameState = 'missed';
                        }
                    } else {
                        gameState = 'missed';
                    }
                }
            }
        }

        function drawEnergy() {
            const maxHeight = canvas.height - target.height - ball.radius;
            const currentHeight = maxHeight - ball.y;
            const gravity = gravities[planetSelect.value];
            
            // Mass is arbitrary, but let's set it to 1 for simplicity
            const mass = 1;
            
            const potentialEnergy = mass * gravity * (currentHeight / (canvas.height - target.height) * 100);
            const kineticEnergy = gameState === 'dropping' ? 0.5 * mass * ball.velocity * ball.velocity : 0;
            
            const totalEnergy = mass * gravity * 100;  // 100 is the max height in meters
            
            const pePercentage = potentialEnergy / totalEnergy;
            const kePercentage = kineticEnergy / totalEnergy;

            ctx.fillStyle = 'blue';
            ctx.fillRect(canvas.width - 100, canvas.height - 120, 20, -100 * pePercentage);
            ctx.fillStyle = 'orange';
            ctx.fillRect(canvas.width - 70, canvas.height - 120, 20, -100 * kePercentage);

            ctx.font = '14px Arial';
            ctx.fillStyle = 'black';
            ctx.fillText('PE', canvas.width - 100, canvas.height - 100);
            ctx.fillText('KE', canvas.width - 70, canvas.height - 100);

            // Display energy values
            ctx.fillText(`PE: ${potentialEnergy.toFixed(2)} J`, canvas.width - 150, canvas.height - 80);
            ctx.fillText(`KE: ${kineticEnergy.toFixed(2)} J`, canvas.width - 150, canvas.height - 60);
        }

        function drawIcon() {
            const img = new Image();
            img.onload = function() {
                ctx.drawImage(img, 10, canvas.height - 60, 50, 50);
            }
            img.src = 'icon-500x500.png';
        }

        function gameLoop() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            drawTarget();
            drawBall();
            updateBall();
            drawEnergy();
            drawIcon();

            const stage = stages[currentStage];
            const height = ((canvas.height - target.height - ball.y) / (canvas.height - target.height) * 100).toFixed(1);

            ctx.font = '18px Arial';
            ctx.fillStyle = 'black';
            ctx.fillText('Score: ' + score, 10, 30);
            ctx.fillText(`Target Speed: ${stage.targetSpeed} m/s`, 10, 60);
            ctx.fillText(`Current Speed: ${Math.abs(ball.velocity).toFixed(2)} m/s`, 10, 90);
            ctx.fillText(`Height: ${height} m`, 10, 120);

            ctx.font = '14px Arial';
            ctx.fillText(stage.message, 10, 150);
            ctx.fillText(`Planet: ${stage.planet}`, 10, 180);

            // Energy equations
            ctx.textAlign = 'right';
            ctx.fillText('PE = mgh', canvas.width - 10, 30);
            ctx.fillText('KE = ½mv²', canvas.width - 10, 60);
            ctx.textAlign = 'left';

            if (gameState === 'scored') {
                ctx.fillText('Great job! Perfect speed! Click to continue', canvas.width / 2 - 150, canvas.height / 2);
                setStage(currentStage);
            } else if (gameState === 'missed') {
                ctx.fillText(`Missed! Impact speed: ${impactSpeed.toFixed(2)} m/s. Try again!`, canvas.width / 2 - 150, canvas.height / 2);
                gameState = 'setup';
                const height = parseInt(heightSlider.value) / 10;  // Convert to meters
                ball.y = canvas.height - target.height - height * ((canvas.height - target.height) / 100) - ball.radius;
            }

            requestAnimationFrame(gameLoop);
        }

        setStage(0);
        gameLoop();
    </script>
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js')
                .then(registration => console.log('ServiceWorker registered'))
                .catch(error => console.log('ServiceWorker registration failed: ', error));
        }
    </script>
</body>
</html>
```